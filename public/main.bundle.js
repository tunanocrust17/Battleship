(()=>{"use strict";var e={365:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(601),a=r.n(n),i=r(314),s=r.n(i)()(a());s.push([e.id,":root{\n    --boxSize: 45px;\n    --shipSize: 45px;\n    --boxGap: 10px;\n}\n\nbody {\n    background-color: rgb(237, 237, 237);\n}\n\n.battleship {\n    display: flex;\n    justify-content: center;\n    color: rgb(49, 49, 49);\n    font-family: poppins;\n}\n\n.placeShipsSetup {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n}\n\n.playerSetupBoard, .playerBoard, .botBoard {\n    display: grid;\n    grid-template-columns: repeat(10, 1fr);\n    grid-gap: 3px;\n    width: 500px;\n    height: 500px;\n}\n\n.shipsContainer {\n    padding: 75px 0 25px;\n    display: flex;\n    gap: var(--boxGap);\n\n}\n\n.cell {\n    min-height: 45px;\n    max-height: 45px;\n    min-width: 45px;\n    max-width: 45px;\n    border-style: solid;\n    border-radius: 15%;\n    border-color: grey;\n}\n\n.botBoard >div:hover {\n    opacity: 25%;\n    background-color: black;\n}\n\n.cellHover{\n    background-color: black;\n    opacity: 25%;\n}\n\n/* .draggable{\n    position: relative;\n} */\n\n.dragging{\n    opacity: .5;\n}\n\n#carrier, #battleship, #destroyer, #submarine, #patrol {\n    height: 45px;\n    border-radius: 5px;\n}\n\n#carrier {\n    height: var(--shipSize);\n    width: calc((var(--shipSize) * 5 ));\n    background-color: red;\n}\n\n#battleship {\n    width: calc(var(--shipSize) * 4);\n    background-color: blue;\n}\n\n#destroyer {\n    width: calc(var(--shipSize) * 3);\n    background-color: blueviolet;\n}\n\n#submarine {\n    width: calc(var(--shipSize) * 3);\n    background-color: aqua;\n}\n\n#patrol {\n    width: calc(var(--shipSize) * 2);\n    background-color: chartreuse;\n}\n\n.gameContainer {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    gap: 75px;\n}\n\n.gameOverDiv {\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n}\n\n.beginGame, .playAgain {\n  background-color: #744ceaf5;\n  border-radius: 8px;\n  border-style: none;\n  color: #FFFFFF;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  height: 40px;\n  line-height: 20px;\n  margin: 0;\n  padding: 10px 16px;\n  text-align: center;\n  transition: background-color 450ms;\n}\n\n.beginGame:hover,\n.beginGame.focus,\n.playAgain:hover,\n.playAgain:focus {\n  background-color: #F082AC;\n  transition-duration: 150ms;\n}\n\n\n.hidden {\n    display: none;\n}",""]);const o=s},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(n)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);n&&s[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),r&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=r):d[2]=r),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var i={},s=[],o=0;o<e.length;o++){var l=e[o],c=n.base?l[0]+n.base:l[0],d=i[c]||0,u="".concat(c," ").concat(d);i[c]=d+1;var h=r(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var g=a(p,n);n.byIndex=o,t.splice(o,0,{identifier:u,updater:g,references:1})}s.push(u)}return s}function a(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,a){var i=n(e=e||[],a=a||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var o=r(i[s]);t[o].references--}for(var l=n(e,a),c=0;c<i.length;c++){var d=r(i[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=l}}},659:e=>{var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,r)=>{e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var a=void 0!==r.layer;a&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,a&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={id:n,exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nc=void 0,(()=>{var e=r(72),t=r.n(e),n=r(825),a=r.n(n),i=r(659),s=r.n(i),o=r(56),l=r.n(o),c=r(540),d=r.n(c),u=r(113),h=r.n(u),p=r(365),g={};g.styleTagTransform=h(),g.setAttributes=l(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=d(),t()(p.A,g),p.A&&p.A.locals&&p.A.locals;class f{constructor(e,t){this.name=e,this.length=t,this.isRotated=!1,this.currentDamage=0,this.isSunk=!1}hit(){this.currentDamage++,this.sinkShip()}sinkShip(){this.currentDamage===this.length&&(this.isSunk=!0)}checkIfSunk(){return this.isSunk}}class m{constructor(){this.carrier=this.#e("carrier",5),this.battleship=this.#e("battleship",4),this.destroyer=this.#e("destroyer",3),this.submarine=this.#e("submarine",3),this.patrol=this.#e("patrol",2),this.gameboard=this.#t(),this.landedAttacks=[],this.missedAttacks=[],this.numberOfPlacedShips=[],this.numberOfSunkShips=0,this.allShipsSunk=!1}#e(e,t){return new f(e,t)}#t(){let e=[];for(let t=0;t<10;t++){let t=[];for(let e=0;e<10;e++)t.push(null);e.push(t)}return e}placeShip(e,t,r){this.gameboard[e][t]=r}getBoard(){return this.gameboard}getMissedAttacks(){return[...this.missedAttacks]}getSuccessfulAttacks(){return[...this.landedAttacks]}#r(e,t){for(let r=0;r<e.length;r++)if(e[r][0]===t[0]&&e[r][1]===t[1])return!0;return!1}isValidAttack(e,t){let r=!this.#r(this.getSuccessfulAttacks(),[e,t]);return!this.#r(this.getMissedAttacks(),[e,t])&&r&&e>=0&&e<10&&t>=0&&t<10}updateSunkShipsStatus(){let e={carrier:this.carrier,battleship:this.battleship,destroyer:this.destroyer,submarine:this.submarine,patrol:this.patrol},t=Object.keys(e),r=0;t.forEach((t=>{e[t].isSunk&&r++})),this.numberOfSunkShips=r}checkAllShipsPlaced(){return 5===this.numberOfPlacedShips}checkAllShipsSunk(){return this.updateSunkShipsStatus(),5===this.numberOfSunkShips&&(this.allShipsSunk=!0),this.allShipsSunk}receiveInput(e,t){if(!this.isValidAttack(e,t))return["not a valid attack"];let r=this.gameboard,n={carrier:this.carrier,battleship:this.battleship,destroyer:this.destroyer,submarine:this.submarine,patrol:this.patrol};if(null!==r[e][t]){let a=n[r[e][t]];a.hit(),this.landedAttacks.push([e,t]);let i=this.checkAllShipsSunk();return["it's a hit!",a,a.isSunk,i]}return this.missedAttacks.push([e,t]),["it's a miss!"]}}class b{constructor(){this.gameboard=this.#t(),this.playersTurn=!0,this.gameWon=!1}#t(){return new m}attackEnemy(e,t,r){let[n]=r.gameboard.receiveInput(e,t);return"it's a hit!"==n||"it's a miss!"==n?n:"not a valid attack"}switchPlayerTurn(){this.playersTurn?this.playersTurn=!1:this.playersTurn=!0}}class y{constructor(){this.gameboard=this.#t()}#t(){return new m}checkValidPlacement(e,t,r,n){let a=this.gameboard.gameboard;const i=a.length,s=a[0].length,o=n.length;if(null!==a[e][t])return!1;if(r){if(e+o>i)return!1;for(let r=0;r<o;r++)if(null!==a[e+r][t])return!1}else{if(t+n.length>s)return!1;for(let r=0;r<o;r++)if(null!==a[e][t+r])return!1}return!0}randomNumber(){return Math.round(9*Math.random())}placeBotShips(){let e={carrier:this.gameboard.carrier,battleship:this.gameboard.battleship,destroyer:this.gameboard.destroyer,submarine:this.gameboard.submarine,patrol:this.gameboard.patrol},t=Object.keys(e);for(let r=0;r<t.length;r++){let n=!1;for(;!n;){const a=Math.round(9*Math.random()),i=Math.round(9*Math.random()),s=Math.random()<.5;if(this.checkValidPlacement(a,i,s,e[t[r]])){let o=e[t[r]].length;if(s){for(let e=0;e<o;e++)this.gameboard.placeShip(a+e,i,t[r]);n=!0}else{for(let e=0;e<o;e++)this.gameboard.placeShip(a,i+e,t[r]);n=!0}}}}}attackPlayer(e){let t,r,n;do{t=this.randomNumber(),r=this.randomNumber(),[n]=e.gameboard.receiveInput(t,r)}while("not a valid attack"===n);return console.log("x is "+t,"y is "+r),[n,t,r]}}function v(e){for(let t=0;t<10;t++)for(let r=0;r<10;r++){const n=document.createElement("div");n.className="cell",n.dataset.x=t,n.dataset.y=r,e.appendChild(n)}}v(document.querySelector(".botBoard")),function(){v(document.querySelector(".playerSetupBoard"));const e=new y,t=new b;function r(){let e=document.querySelector(".beginGame");e.classList.remove("hidden"),e.addEventListener("click",(()=>{(function(){let e=document.querySelector(".placeShipsSetup"),t=document.querySelector(".playerSetupBoard"),r=document.querySelector(".playerBoard");for(e.classList.add("hidden");t.childNodes.length;)r.appendChild(t.firstChild);document.querySelector(".gameContainer").classList.remove("hidden")})(),s()}))}function n(r){let n=function(r){let n=r.target.dataset.x,a=r.target.dataset.y;return t.attackEnemy(n,a,e)}(r);"it's a hit!"==n?(r.target.style.backgroundColor="green",t.switchPlayerTurn(),a(),setTimeout(s,250)):"it's a miss!"==n?(r.target.style.backgroundColor="red",t.switchPlayerTurn(),a(),setTimeout(s,250)):console.log(t.playersTurn)}function a(){document.querySelectorAll("div.botBoard > div").forEach((e=>{e.removeEventListener("click",n)}))}function i(){location.reload()}function s(){console.log(t.playersTurn);let[r,a]=1==t.gameboard.allShipsSunk?["Ah sorry the bot beat you this time!",!0]:1==e.gameboard.allShipsSunk?["You won! Congrats!",!0]:["no winner yet",!1];if(a)return console.log(r),void function(e){document.querySelector(".gameContainer").classList.add("hidden");let t=document.querySelector(".gameOverDiv"),r=document.querySelector(".gameOverMessage");t.classList.remove("hidden"),r.innerHTML=e,document.querySelector(".playAgain").addEventListener("click",i)}(r);if(1!=t.playersTurn){let[r,n,a]=e.attackPlayer(t),i=`div[data-x="${n}"][data-y="${a}"]`;return document.querySelector(i).style.backgroundColor="purple",t.switchPlayerTurn(),s()}document.querySelectorAll("div.botBoard > div").forEach((e=>{e.addEventListener("click",n)}))}e.placeBotShips(),console.log(e.gameboard.gameboard),function(){let e=document.querySelectorAll(".draggable"),n=document.querySelectorAll(".cell");e.forEach((e=>{e.addEventListener("click",(e=>function(e){let t=e.target,r=t.dataset.isrotated,n=parseInt(e.target.dataset.length);"false"===r?(t.setAttribute("data-isRotated","true"),t.style.width="var(--shipSize)",t.style.height=`calc(var(--shipSize) * ${n})`):(t.setAttribute("data-isRotated","false"),t.style.width=`calc(var(--shipSize) * ${n})`,t.style.height="var(--shipSize)")}(e))),e.addEventListener("dragstart",(e=>function(e){e.dataTransfer.setData("shipName",e.target.id),e.dataTransfer.setData("shipLength",e.target.dataset.length),e.dataTransfer.setData("isRotated",e.target.dataset.isrotated),console.log("drag-start"),e.target.classList.add("dragging")}(e))),e.addEventListener("dragend",(e=>function(e){e.target.classList.remove("dragging")}(e)))})),n.forEach((e=>{e.addEventListener("dragenter",(e=>function(e){e.target.classList.add("cellHover")}(e))),e.addEventListener("dragleave",(e=>function(e){e.target.classList.remove("cellHover")}(e))),e.addEventListener("dragover",(e=>function(e){e.preventDefault()}(e))),e.addEventListener("drop",(e=>function(e){function n(e,t){let r=e.parentNode,n=Array.prototype.indexOf.call(r.children,e);return r.children[n+t]}const a=e.dataTransfer.getData("shipName"),i=parseInt(e.dataTransfer.getData("shipLength"));!function(a,i,s,o,l){if(function(e,r,n,a){let i=t.gameboard.gameboard,s=i.length,o=i[0].length;if(null!==t.gameboard.gameboard[e][r])return!1;if("true"===n){if(e+a>s)return!1;for(let t=0;t<a;t++)if(null!==i[e+t][r])return!1}else{if(r+a>o)return!1;for(let t=0;t<a;t++)if(null!==i[e][r+t])return!1}return!0}(a,i,s,l)){const c=document.querySelector(".dragging");let d=e.target;if(d.classList.remove("cellHover"),"true"===s)for(let e=0;e<10*l;e+=10)n(d,e).setAttribute("id",o),console.log(n(d,e));else for(let e=0;e<l;e++)n(d,e).setAttribute("id",o);if("true"===s){for(let e=0;e<l;e++)t.gameboard.placeShip(a+e,i,o),c.classList.add("hidden");t.gameboard.numberOfPlacedShips++,t.gameboard.checkAllShipsPlaced()&&r()}else{for(let e=0;e<l;e++)t.gameboard.placeShip(a,i+e,o),c.classList.add("hidden");t.gameboard.numberOfPlacedShips++,t.gameboard.checkAllShipsPlaced()&&r()}}}(parseInt(e.target.dataset.x),parseInt(e.target.dataset.y),e.dataTransfer.getData("isRotated"),a,i)}(e)))}))}()}()})()})();